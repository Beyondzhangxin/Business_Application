<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>流程设置</title>
    <link rel="stylesheet" type="text/css" href="/themes/default/easyui.css">
    <link rel="stylesheet" type="text/css" href="/themes/icon.css">
    <link rel="stylesheet" type="text/css" href="/themes/cms.css">
    <link rel="stylesheet" type="text/css" href="/css/common.css">
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script type="text/javascript" src="/js/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="/js/easyui-lang-zh_CN.js"></script>
    <script type="text/javascript" src="/js/datagrid-transposedview.js"></script>
</head>
<body>

<table id="prodefSet_dg" style="width:650px;height:250px"
       url="datagrid22_getdata.php"
       title="流程办理人设置"
       singleSelect="true" fitColumns="true">
    <thead>
    <tr>
        <th field="流程ID" width="80">Item ID</th>
        <th field="流程名称" width="100">Product ID</th>
    </tr>
    </thead>
</table>
<script type="text/javascript">
    $(function () {
        $('#dg').datagrid({
            view: detailview,
            detailFormatter: function (index, row) {
                return '<div style="padding:2px"><table class="ddv"></table></div>';
            },
            onExpandRow: function (index, row) {
                var ddv = $(this).datagrid('getRowDetail', index).find('table.ddv');
                ddv.datagrid({
                    url: 'datagrid22_getdetail.php?itemid=' + row.itemid,
                    fitColumns: true,
                    singleSelect: true,
                    rownumbers: true,
                    loadMsg: '',
                    height: 'auto',
                    columns: [[
                        {field: 'orderid', title: 'Order ID', width: 200},
                        {field: 'quantity', title: 'Quantity', width: 100, align: 'right'},
                        {field: 'unitprice', title: 'Unit Price', width: 100, align: 'right'}
                    ]],
                    onResize: function () {
                        $('#dg').datagrid('fixDetailRowHeight', index);
                    },
                    onLoadSuccess: function () {
                        setTimeout(function () {
                            $('#dg').datagrid('fixDetailRowHeight', index);
                        }, 0);
                    }
                });
                $('#dg').datagrid('fixDetailRowHeight', index);
            }
        });
    });
</script>

</body>
</html>